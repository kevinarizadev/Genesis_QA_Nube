<div id="modal_gestion_medicamentos" class="close-none newdesing_modal">
    <style>
        .newdesing_modal .ngdialog-add:hover {
            background-color: #164691;
            color: white;
        }

        .newdesing_modal input[type="date"]::-webkit-inner-spin-button,
        .newdesing_modal input[type="date"]::-webkit-calendar-picker-indicator {
            /* display: none; */
            -webkit-appearance: none;
        }

        .newdesing_modal ::-webkit-input-placeholder {
            color: #80868b;
        }

        #modal_gestion_medicamentos {
            width: 99%;
            margin-top: 0;
        }

        .newdesing_modal>.col>.card-content {
            border-radius: 0;
        }

        .newdesing_modal>.col>.card-action {
            border-radius: inherit;
        }

        html.ngdialog-open,
        body.ngdialog-open {
            overflow: hidden !important;
        }

        .collapsible-body p {
            padding: 10px 30px;
            height: auto;
            line-height: normal;
        }

        [data-tip]:before {
            top: 37%;
        }

        [data-tip]:after {
            top: 12%;
        }
    </style>
    <div class="col s12 m6 l6 card">
        <div class="card-content" style="border-bottom: 5px solid #4CAF50">
            <h5 style="max-width: 85%;">{{titulo}}</h5>
            <div title="Cerrar" class="ngdialog-close" style="margin-left: auto;"></div>
        </div>
        <div class="card-action border-none">
            <!-- ---------------------------------------------------------------------------Ver Detalle------------------------------------------------------------------------------ -->
            <!-- EPS -->
            <div ng-if="datos.vista == 1" class="row margin">
                <div class="col l12 m12 s12 no-padding">
                    <div class="m-b row" style="max-height: 83vh;overflow: auto;">
                        <div class="col l6 m12 s12">
                            <div class="col l12 m12 s12 no-padding">
                                <blockquote class="display-flex noselectxtpqr" style="margin: 10px 0;">
                                    <strong>Datos del Afiliado</strong>
                                </blockquote>
                                <table class="striped table-bordered white w-100">
                                    <tbody>
                                        <tr>
                                            <th class="default-background white-text">Identificación:</th>
                                            <td>{{datos.autorizacion.cabeza.TIPO_DOC}} -
                                                {{datos.autorizacion.cabeza.DOCUMENTO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Nombre:</th>
                                            <td>{{datos.autorizacion.cabeza.NOMBRE}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Fecha Nacimiento:</th>
                                            <td>{{datos.autorizacion.cabeza.NACIMIENTO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Edad:</th>
                                            <td>{{datos.autorizacion.cabeza.EDAD}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Sexo:</th>
                                            <td>{{datos.autorizacion.cabeza.SEXO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Celular:</th>
                                            <td>{{datos.autorizacion.cabeza.CONTACTO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Correo:</th>
                                            <td>{{datos.autorizacion.cabeza.EMAIL}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Ubicación:</th>
                                            <td>{{datos.autorizacion.cabeza.UBICACION_AFI}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Direccion:</th>
                                            <td>{{datos.autorizacion.cabeza.DIRECCION}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Regimen:</th>
                                            <td>{{datos.autorizacion.cabeza.REGIMEN}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="col l6 m12 s12">
                            <div class="col l12 m12 s12 no-padding">
                                <blockquote class="display-flex noselectxtpqr" style="margin: 10px 0;">
                                    <strong>Datos Autorización</strong>
                                </blockquote>
                                <table class="striped table-bordered white w-100">
                                    <tbody>
                                        <tr>
                                            <th class="default-background white-text">Codigo Autorizacion:</th>
                                            <td>{{datos.autorizacion.cabeza.NUMERO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Ubicacion Autorizacion:</th>
                                            <td>{{datos.autorizacion.cabeza.UBI_OASIS_AUT}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Estado:</th>
                                            <td>{{datos.autorizacion.cabeza.ESTADO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Fecha Autorizacion:</th>
                                            <td>{{datos.autorizacion.cabeza.FECHA_AUTORIZACION}}</td>
                                        </tr>
                                        <!-- <tr>
                                                    <th class="default-background white-text">Fecha Orden:</th>
                                                    <td>{{datos.autorizacion.cabeza.FECHA_ORDEN}}</td>
                                                </tr>
                                                <tr>
                                                    <th class="default-background white-text">Fecha Vencimiento:</th>
                                                    <td>{{datos.autorizacion.cabeza.FECHA_VENCIMIENTO}}</td>
                                                </tr> -->
                                        <tr>
                                            <th class="default-background white-text">Fecha Entrega:</th>
                                            <td>{{datos.autorizacion.cabeza.FECHA_VENCIMIENTO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Estado Entrega:</th>
                                            <td
                                                ng-class="{'yellow':datos.autorizacion.cabeza.ESTADO_ENTREGA=='PENDIENTE','blue':datos.autorizacion.cabeza.ESTADO_ENTREGA=='PARCIAL','green':datos.autorizacion.cabeza.ESTADO_ENTREGA=='TOTAL','purple':datos.autorizacion.cabeza.ESTADO_ENTREGA=='CONFIRMADO'}">
                                                {{datos.autorizacion.cabeza.ESTADO_ENTREGA}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="col l12 m12 s12">
                            <blockquote class="display-flex noselectxtpqr" style="margin: 10px 0;">
                                <strong>Productos</strong>
                            </blockquote>
                            <table class="striped table-bordered white w-100">
                                <thead class="default-background">
                                    <tr class="default-background white-text">
                                        <th class="border-none center-align">Codigo</th>
                                        <th class="border-none">Nombre</th>
                                        <!-- <th class="border-none">Valor</th> -->
                                        <th class="border-none center-align">Cantidad</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="productos in datos.autorizacion.detalle">
                                        <td class="center-align">{{productos.CODIGO}}</td>
                                        <td>{{productos.NOMBRE}}</td>
                                        <!-- <td>{{productos.VALOR}}</td> -->
                                        <td class="center-align">{{productos.CANTIDAD}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between">
                        <input class="waves-effect waves-light btn white-text red left-align" type="button"
                            ng-click="modalClose()" value="Cerrar">
                    </div>
                </div>
            </div>
            <!-- IPS -->
            <div ng-if="datos.vista == 2" class="row margin">
                <div class="col l12 m12 s12 no-padding">
                    <div class="m-b row" style="max-height: 83vh;overflow: auto;">
                        <div class="col l6 m12 s12">
                            <div class="col l12 m12 s12 no-padding">
                                <blockquote class="display-flex noselectxtpqr" style="margin: 10px 0;">
                                    <strong>Datos de la Autorización</strong>
                                </blockquote>
                                <table class="striped table-bordered white w-100">
                                    <tbody>
                                        <tr>
                                            <th class="default-background white-text">Codigo Autorizacion:</th>
                                            <td>{{datos.autorizacion.cabeza.NUMERO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Ubicacion Autorizacion:</th>
                                            <td>{{datos.autorizacion.cabeza.UBI_OASIS_AUT}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Nit:</th>
                                            <td>{{datos.autorizacion.cabeza.NIT_ASIGNADA}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Nombre IPS:</th>
                                            <td>{{datos.autorizacion.cabeza.ASIGNADA}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Estado:</th>
                                            <td>{{datos.autorizacion.cabeza.ESTADO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Fecha Autorizacion:</th>
                                            <td>{{datos.autorizacion.cabeza.FECHA_AUTORIZACION}}</td>
                                        </tr>
                                        <!-- <tr>
                                                    <th class="default-background white-text">Fecha Orden:</th>
                                                    <td>{{datos.autorizacion.cabeza.FECHA_ORDEN}}</td>
                                                </tr>
                                                <tr>
                                                    <th class="default-background white-text">Fecha Vencimiento:</th>
                                                    <td>{{datos.autorizacion.cabeza.FECHA_VENCIMIENTO}}</td>
                                                </tr> -->
                                        <tr>
                                            <th class="default-background white-text">Fecha Entrega:</th>
                                            <td>{{datos.autorizacion.cabeza.FECHA_VENCIMIENTO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Estado Entrega:</th>
                                            <td
                                                ng-class="{'yellow':datos.autorizacion.cabeza.ESTADO_ENTREGA=='PENDIENTE','blue':datos.autorizacion.cabeza.ESTADO_ENTREGA=='PARCIAL','green':datos.autorizacion.cabeza.ESTADO_ENTREGA=='TOTAL','purple':datos.autorizacion.cabeza.ESTADO_ENTREGA=='CONFIRMADO'}">
                                                {{datos.autorizacion.cabeza.ESTADO_ENTREGA}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col l12 m12 s12 no-padding">
                                <blockquote class="display-flex noselectxtpqr" style="margin: 10px 0;">
                                    <strong>Datos del Afiliado</strong>
                                </blockquote>
                                <table class="striped table-bordered white w-100">
                                    <tbody>
                                        <tr>
                                            <th class="default-background white-text">Identificación:</th>
                                            <td>{{datos.autorizacion.cabeza.TIPO_DOC}} -
                                                {{datos.autorizacion.cabeza.DOCUMENTO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Nombre:</th>
                                            <td>{{datos.autorizacion.cabeza.NOMBRE}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Fecha Nacimiento:</th>
                                            <td>{{datos.autorizacion.cabeza.NACIMIENTO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Edad:</th>
                                            <td>{{datos.autorizacion.cabeza.EDAD}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Sexo:</th>
                                            <td>{{datos.autorizacion.cabeza.SEXO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Celular:</th>
                                            <td>{{datos.autorizacion.cabeza.CONTACTO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Correo:</th>
                                            <td>{{datos.autorizacion.cabeza.EMAIL}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Ubicación:</th>
                                            <td>{{datos.autorizacion.cabeza.UBICACION_AFI}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Direccion:</th>
                                            <td>{{datos.autorizacion.cabeza.DIRECCION}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Regimen:</th>
                                            <td>{{datos.autorizacion.cabeza.REGIMEN}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="col l6 m12 s12">
                            <div class="col l12 m12 s12">
                                <blockquote class="display-flex noselectxtpqr" style="margin: 10px 0;">
                                    <strong>Productos de la Autorización</strong>
                                </blockquote>
                                <table class="striped table-bordered white w-100">
                                    <thead class="default-background">
                                        <tr class="default-background white-text">
                                            <th class="border-none center-align">Codigo</th>
                                            <th class="border-none">Nombre</th>
                                            <!-- <th class="border-none">Valor</th> -->
                                            <th class="border-none center-align">Cantidad</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="productos in datos.autorizacion.detalle">
                                            <td class="center-align">{{productos.CODIGO}}</td>
                                            <td>{{productos.NOMBRE}}</td>
                                            <!-- <td>{{productos.VALOR}}</td> -->
                                            <td class="center-align">{{productos.CANTIDAD}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ---------------------------------------------------------------------------Cargar Soporte------------------------------------------------------------------------------ -->
            <div ng-if="datos.vista == 3" class="row margin">
                <!-- IPS -->
                <div class="col l12 m12 s12 no-padding">
                    <div class="margin row" style="max-height: 83vh;overflow: auto;">
                        <div class="col l6 m12 s12">
                            <div class="col l12 m12 s12 no-padding">
                                <blockquote class="display-flex noselectxtpqr" style="margin: 10px 0;">
                                    <strong>Datos de la Autorización</strong>
                                </blockquote>
                                <table class="striped table-bordered white w-100">
                                    <tbody>
                                        <tr>
                                            <th class="default-background white-text">Codigo Autorizacion:</th>
                                            <td>{{datos.autorizacion.cabeza.NUMERO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Ubicacion Autorizacion:</th>
                                            <td>{{datos.autorizacion.cabeza.UBI_OASIS_AUT}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Estado:</th>
                                            <td>{{datos.autorizacion.cabeza.ESTADO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Fecha Autorizacion:</th>
                                            <td>{{datos.autorizacion.cabeza.FECHA_AUTORIZACION}}</td>
                                        </tr>
                                        <!-- <tr>
                                                            <th class="default-background white-text">Fecha Orden:</th>
                                                            <td>{{datos.autorizacion.cabeza.FECHA_ORDEN}}</td>
                                                        </tr>
                                                        <tr>
                                                            <th class="default-background white-text">Fecha Vencimiento:</th>
                                                            <td>{{datos.autorizacion.cabeza.FECHA_VENCIMIENTO}}</td>
                                                        </tr> -->
                                        <!-- <tr>
                                                    <th class="default-background white-text">Fecha Entrega:</th>
                                                    <td>{{datos.autorizacion.cabeza.FECHA_VENCIMIENTO}}</td>
                                                </tr> -->
                                        <tr>
                                            <th class="default-background white-text">Estado Entrega:</th>
                                            <td
                                                ng-class="{'yellow':datos.autorizacion.cabeza.ESTADO_ENTREGA=='PENDIENTE','blue':datos.autorizacion.cabeza.ESTADO_ENTREGA=='PARCIAL','green':datos.autorizacion.cabeza.ESTADO_ENTREGA=='TOTAL','purple':datos.autorizacion.cabeza.ESTADO_ENTREGA=='CONFIRMADO'}">
                                                {{datos.autorizacion.cabeza.ESTADO_ENTREGA}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col l12 m12 s12 no-padding">
                                <blockquote class="display-flex noselectxtpqr" style="margin: 10px 0;">
                                    <strong>Datos del Afiliado</strong>
                                </blockquote>
                                <table class="striped table-bordered white w-100">
                                    <tbody>
                                        <tr>
                                            <th class="default-background white-text">Identificación:</th>
                                            <td>{{datos.autorizacion.cabeza.TIPO_DOC}} -
                                                {{datos.autorizacion.cabeza.DOCUMENTO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Nombre:</th>
                                            <td>{{datos.autorizacion.cabeza.NOMBRE}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Fecha Nacimiento:</th>
                                            <td>{{datos.autorizacion.cabeza.NACIMIENTO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Edad:</th>
                                            <td>{{datos.autorizacion.cabeza.EDAD}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Sexo:</th>
                                            <td>{{datos.autorizacion.cabeza.SEXO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Celular:</th>
                                            <td>{{datos.autorizacion.cabeza.CONTACTO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Correo:</th>
                                            <td>{{datos.autorizacion.cabeza.EMAIL}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Ubicación:</th>
                                            <td>{{datos.autorizacion.cabeza.UBICACION_AFI}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Direccion:</th>
                                            <td>{{datos.autorizacion.cabeza.DIRECCION}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Regimen:</th>
                                            <td>{{datos.autorizacion.cabeza.REGIMEN}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                        </div>
                        <div class="col l6 m12 s12">
                            <div ng-if="datos.autorizacion.cabeza.ESTADO_ENTREGA!='PENDIENTE'"
                                class="col l12 m12 s12 no-padding">
                                <blockquote class="display-flex noselectxtpqr" style="margin: 10px 0;">
                                    <strong>Soportes de Entrega de Medicamentos</strong>
                                </blockquote>
                                <table class="striped table-bordered white w-100">
                                    <thead class="default-background">
                                        <tr class="default-background white-text">
                                            <th class="border-none center-align">Fecha Entrega</th>
                                            <th class="border-none center-align">Detalle Entrega</th>
                                            <th class="border-none center-align">Cantidad Entregada</th>
                                            <th class="border-none center-align">Ver Soporte</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-if="datos.soportes_cargados.length == 0">
                                            <td colspan="4" class="center-align">
                                                No hay datos para mostrar.
                                            </td>
                                        </tr>
                                        <tr ng-repeat="soporte in datos.soportes_cargados">
                                            <td class="center-align">{{soporte.FECHA_ENTREGA}}</td>
                                            <td ng-init="detalle=false" class="center-align">
                                                <i class="icon-eye-6 cursor-pointer"
                                                    ng-class="{'icon-cancel':detalle,'icon-eye-6':!detalle}"
                                                    ng-click="detalle=!detalle"></i>
                                                <table ng-if="detalle" class="striped table-bordered white">
                                                    <tbody>
                                                        <tr ng-repeat="det in soporte.DETALLE_ENTREGA">
                                                            <td>{{det.NOMBRE}}</td>
                                                            <td>{{det.CANTIDAD}}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </td>
                                            <td class="center-align">{{soporte.CANTIDAD}}</td>
                                            <td class="center-align cursor-pointer">
                                                <i ng-click="abrir_ruta_ftp(soporte.URL_SOPORTE)" class="{{ver_icono(soporte.URL_SOPORTE)}}"></i>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col l12 m12 s12 no-padding" style="max-height: 62vh;overflow: auto;">
                                <blockquote class="display-flex noselectxtpqr" style="margin: 10px 0;">
                                    <strong>Medicamentos de la Autorización</strong>
                                </blockquote>
                                <table class="striped table-bordered white w-100">
                                    <thead class="default-background">
                                        <tr class="default-background white-text">
                                            <th class="border-none center-align">Codigo</th>
                                            <th class="border-none">Nombre</th>
                                            <!-- <th class="border-none">Valor</th> -->
                                            <th class="border-none center-align">Cantidad Total</th>
                                            <th class="align-items-center border-none center-align d-flex justify-content-between">Cantidad Entregada
                                                <div style="display: flex;">
                                                    <input type="checkbox" class="filled-in" id="select_all"
                                                        ng-model="select_all" ng-change="checkboxAllSelect(select_all)">
                                                    <label title="Seleccionar Todos" for="select_all"
                                                        style="padding-left: 20px;height: 20px;transform: scale(.8);"></label>
                                                </div>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-if="datos.autorizacion.detalle.length == 0">
                                            <td colspan="5" class="center-align">
                                                No hay datos para mostrar.
                                            </td>
                                        </tr>
                                        <tr ng-repeat="productos in datos.autorizacion.detalle">
                                            <td class="center-align">{{productos.CODIGO}}</td>
                                            <td>{{productos.NOMBRE}}</td>
                                            <!-- <td>{{productos.VALOR}}</td> -->
                                            <td colspan="{{(productos.CANTIDAD!=productos.CANTIDAD_ENTREGADAS)?1:2}}"
                                                class="center-align">
                                                {{productos.CANTIDAD_ENTREGADAS}} de {{productos.CANTIDAD}}</td>
                                            <td ng-show="productos.CANTIDAD!=productos.CANTIDAD_ENTREGADAS"
                                                class="center-align">
                                                <input ng-init="input_cant[$index]=0"
                                                    ng-change="especificar_cantidad_medicamento(datos.autorizacion,productos,$index,input_cant[$index])"
                                                    ng-model="input_cant[$index]" min="0"
                                                    max="{{productos.CANTIDAD-productos.CANTIDAD_ENTREGADAS}}"
                                                    id="{{'input_cant'+$index}}" type="number"
                                                    class="margin border-none white input-text-new gray-input w-100"
                                                    style="box-sizing: border-box;">
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div ng-if="datos.autorizacion.cabeza.ESTADO_ENTREGA!='TOTAL' && datos.autorizacion.cabeza.ESTADO_ENTREGA!='CONFIRMADO'"
                                class="col l12 m12 s12 no-padding">
                                <blockquote class="display-flex noselectxtpqr" style="margin: 10px 0;">
                                    <strong>Cargar Soportes de Entrega de Medicamentos</strong>
                                </blockquote>
                                <table class="striped table-bordered white w-100">
                                    <tbody>
                                        <tr>
                                            <td colspan="2" class="center-align">
                                                <img id="scream" src="">
                                                <i ng-show="foto!=''" ng-click="borrar_img()"
                                                    class="icon-trash-empty red-text cursor-pointer"></i>
                                                <b ng-show="foto==''">Archivo de Soporte:</b>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td ng-init="alert_pdf='';" ng-mouseover="alert_pdf='active';"
                                                ng-mouseleave="alert_pdf='';"
                                                data-tip="Solo se permiten formatos PDF con un peso inferior a 3MB"
                                                class="{{alert_pdf}}" style="width: 50%;">
                                                <div data-file="Seleccionar Documento"
                                                    class="input-out-new input-file-new w-100"
                                                    style="border-radius: 0 !important;">
                                                    <i class="icon-folder-open-1 border-none"
                                                        style="background-color: transparent;"></i>
                                                    <input input-ng-file id="archivo_soporte" data-index="0"
                                                        data-name_default="Seleccionar Documento" type="file"
                                                        class="margin border-none">
                                                </div>
                                            </td>
                                            <td ng-init="alert_cam='';" ng-mouseover="alert_cam='active';"
                                                ng-mouseleave="alert_cam='';"
                                                data-tip="Recuerde tener una camara WEB conectada a este equipo"
                                                class="{{alert_cam}}" style="width: 50%;">
                                                <div ng-click="capturar_foto()"
                                                    class="w-100 cursor-pointer input-out-new d-flex justify-content-between align-items-center"
                                                    style="height: 2rem;border-radius: 0 !important;">
                                                    Capturar Foto con Camara WEB
                                                    <i class="icon-camera" style="font-size: 16px;"></i>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Fecha de Entrega:</th>
                                            <td class="no-padding">
                                                <input ng-model="datos.fecha_entrega"
                                                    min="{{validar_fecha(datos.autorizacion.cabeza.FECHA_AUTORIZACION,1)}}"
                                                    max="{{validar_fecha(datos.autorizacion.cabeza.FECHA_AUTORIZACION,3)}}"
                                                    id="datos_fecha_entrega" type="date"
                                                    class="datepicker border-none input-date-new white margin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="2" class="no-padding">
                                                <input ng-click="guardar_soportes(datos.autorizacion)"
                                                    class="border btn default-background-dark w-100 white-text border-radius-none"
                                                    type="submit" value="Guardar entrega de soporte"
                                                    style="box-shadow: none;">
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="align-items-center d-flex justify-content-between">
                        <input class="waves-effect waves-light btn white-text red left-align" type="button"
                            ng-click="modalClose()" value="Cerrar">
                    </div> -->
                </div>
            </div>
            <!-- Modal -->
            <style>
                .modal-mara-new.modal {
                    width: 840px;
                    max-height: 90%;
                    top: 5% !important;
                    height: auto;
                    z-index: 10;
                    min-height: 20%;
                }

                .modal-mara-new.modal.tipo-modal-2,
                .modal-mara-new.modal.tipo-modal-3 {
                    width: 45%;
                }

                .modal-mara-new.modal>.modal-header,
                .modal-mara-new.modal>.modal-content,
                .modal-mara-new.modal>.modal-footer {
                    padding: 10px 20px;
                }

                .modal-mara-new.modal>.modal-header>.icon-cancel {
                    background-color: transparent;
                    height: 30px;
                    width: 30px;
                    text-align: center;
                    border-radius: 50%;
                }

                .modal-mara-new.modal>.modal-header>.icon-cancel:hover {
                    background-color: #33333375;
                }

                #vista_camara_2 {
                    width: 800px;
                    left: calc(20.94px - 201.32999999999998px);
                    transform: scaleX(1)!important;
                }
            </style>
            <div ng-show="camara==true" id="modal-camara" class="modal modal-mara-new" style="display: block">
                <div class="modal-header d-flex justify-content-between align-items-center white-text green">
                    <h5 class="margin">Capturar Foto del Soporte</h5>
                    <i ng-click="cerrar_modal()"
                        class="align-items-center cursor-pointer d-flex icon-cancel justify-content-center position-relative"></i>
                </div>
                <div class="modal-content row margin">
                    <video id="vista_camara_2"></video>
                    <canvas id="canvas" width="500" height="480" hidden></canvas>
                    <button ng-click="capturar_imagen()" class="btn green left">Capturar</button>
                    <button ng-click="cerrar_modal()" class="btn red right">Cancelar</button>
                </div>
            </div>
            <!-- ---------------------------------------------------------------------------Ver Soporte------------------------------------------------------------------------------ -->
            <div ng-if="datos.vista == 4" class="row margin">
                <div class="col l12 m12 s12 no-padding">
                    <div class="margin row" style="max-height: 83vh;overflow: auto;">
                        <div class="col l6 m12 s12">
                            <div class="col l12 m12 s12 no-padding">
                                <blockquote class="display-flex noselectxtpqr" style="margin: 10px 0;">
                                    <strong>Datos de la Autorización</strong>
                                </blockquote>
                                <table class="striped table-bordered white w-100">
                                    <tbody>
                                        <tr>
                                            <th class="default-background white-text">Codigo Autorizacion:</th>
                                            <td>{{datos.autorizacion.cabeza.NUMERO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Ubicacion Autorizacion:</th>
                                            <td>{{datos.autorizacion.cabeza.UBI_OASIS_AUT}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Estado:</th>
                                            <td>{{datos.autorizacion.cabeza.ESTADO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Fecha Autorizacion:</th>
                                            <td>{{datos.autorizacion.cabeza.FECHA_AUTORIZACION}}</td>
                                        </tr>
                                        <!-- <tr>
                                                <th class="default-background white-text">Fecha Orden:</th>
                                                <td>{{datos.autorizacion.cabeza.FECHA_ORDEN}}</td>
                                            </tr>
                                            <tr>
                                                <th class="default-background white-text">Fecha Vencimiento:</th>
                                                <td>{{datos.autorizacion.cabeza.FECHA_VENCIMIENTO}}</td>
                                            </tr> -->
                                        <!-- <tr>
                                            <th class="default-background white-text">Fecha Entrega:</th>
                                            <td>{{datos.autorizacion.cabeza.FECHA_VENCIMIENTO}}</td>
                                        </tr> -->
                                        <tr>
                                            <th class="default-background white-text">Estado Entrega:</th>
                                            <td
                                                ng-class="{'yellow':datos.autorizacion.cabeza.ESTADO_ENTREGA=='PENDIENTE','blue':datos.autorizacion.cabeza.ESTADO_ENTREGA=='PARCIAL','green':datos.autorizacion.cabeza.ESTADO_ENTREGA=='TOTAL','purple':datos.autorizacion.cabeza.ESTADO_ENTREGA=='CONFIRMADO'}">
                                                {{datos.autorizacion.cabeza.ESTADO_ENTREGA}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col l12 m12 s12 no-padding">
                                <blockquote class="display-flex noselectxtpqr" style="margin: 10px 0;">
                                    <strong>Datos del Afiliado</strong>
                                </blockquote>
                                <table class="striped table-bordered white w-100">
                                    <tbody>
                                        <tr>
                                            <th class="default-background white-text">Identificación:</th>
                                            <td>{{datos.autorizacion.cabeza.TIPO_DOC}} -
                                                {{datos.autorizacion.cabeza.DOCUMENTO}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Nombre:</th>
                                            <td>{{datos.autorizacion.cabeza.NOMBRE}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Fecha Nacimiento:</th>
                                            <td>{{datos.autorizacion.cabeza.NACIMIENTO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Edad:</th>
                                            <td>{{datos.autorizacion.cabeza.EDAD}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Sexo:</th>
                                            <td>{{datos.autorizacion.cabeza.SEXO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Celular:</th>
                                            <td>{{datos.autorizacion.cabeza.CONTACTO}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Correo:</th>
                                            <td>{{datos.autorizacion.cabeza.EMAIL}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Ubicación:</th>
                                            <td>{{datos.autorizacion.cabeza.UBICACION_AFI}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Direccion:</th>
                                            <td>{{datos.autorizacion.cabeza.DIRECCION}}</td>
                                        </tr>
                                        <tr>
                                            <th class="default-background white-text">Regimen:</th>
                                            <td>{{datos.autorizacion.cabeza.REGIMEN}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                        </div>
                        <div class="col l6 m12 s12">
                            <div ng-if="datos.autorizacion.cabeza.ESTADO_ENTREGA!='PENDIENTE'"
                                class="col l12 m12 s12 no-padding">
                                <blockquote class="display-flex noselectxtpqr" style="margin: 10px 0;">
                                    <strong>Soportes de Entrega de Medicamentos</strong>
                                </blockquote>
                                <table class="striped table-bordered white w-100">
                                    <thead class="default-background">
                                        <tr class="default-background white-text">
                                            <th class="border-none center-align">Fecha Entrega</th>
                                            <th class="border-none center-align">Detalle Entrega</th>
                                            <th class="border-none center-align">Cantidad Entregada</th>
                                            <th class="border-none center-align">Ver Soporte</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-if="datos.soportes_cargados.length == 0">
                                            <td colspan="4" class="center-align">
                                                No hay datos para mostrar.
                                            </td>
                                        </tr>
                                        <tr ng-repeat="soporte in datos.soportes_cargados">
                                            <td class="center-align">{{soporte.FECHA_ENTREGA}}</td>
                                            <td ng-init="detalle=false" class="center-align">
                                                <i class="icon-eye-6 cursor-pointer"
                                                    ng-class="{'icon-cancel':detalle,'icon-eye-6':!detalle}"
                                                    ng-click="detalle=!detalle"></i>
                                                <table ng-if="detalle" class="striped table-bordered white">
                                                    <tbody>
                                                        <tr ng-repeat="det in soporte.DETALLE_ENTREGA">
                                                            <td>{{det.NOMBRE}}</td>
                                                            <td>{{det.CANTIDAD}}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </td>
                                            <td class="center-align">{{soporte.CANTIDAD}}</td>
                                            <td class="center-align cursor-pointer"><i
                                                    ng-click="abrir_ruta_ftp(soporte.URL_SOPORTE)"
                                                    class="{{ver_icono(soporte.URL_SOPORTE)}}"></i></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col l12 m12 s12 no-padding" style="max-height: 62vh;overflow: auto;">
                                <blockquote class="display-flex noselectxtpqr" style="margin: 10px 0;">
                                    <strong>Medicamentos de la Autorización</strong>
                                </blockquote>
                                <table class="striped table-bordered white w-100">
                                    <thead class="default-background">
                                        <tr class="default-background white-text">
                                            <th class="border-none center-align">Codigo</th>
                                            <th class="border-none">Nombre</th>
                                            <!-- <th class="border-none">Valor</th> -->
                                            <th class="border-none center-align">Cantidad Total</th>
                                            <th class="border-none center-align">Cantidad Entregada</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-if="datos.autorizacion.detalle.length == 0">
                                            <td colspan="4" class="center-align">
                                                No hay datos para mostrar.
                                            </td>
                                        </tr>
                                        <tr ng-repeat="productos in datos.autorizacion.detalle">
                                            <td class="center-align">{{productos.CODIGO}}</td>
                                            <td>{{productos.NOMBRE}}</td>
                                            <!-- <td>{{productos.VALOR}}</td> -->
                                            <td class="center-align">
                                                {{productos.CANTIDAD}}</td>
                                            <td class="center-align">
                                                {{productos.CANTIDAD_ENTREGADAS}}
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="align-items-center d-flex justify-content-between">
                            <input class="waves-effect waves-light btn white-text red left-align" type="button"
                                ng-click="modalClose()" value="Cerrar">
                        </div> -->
                </div>
            </div>
            <!-- ---------------------------------------------------------------------------Tranferir IPS------------------------------------------------------------------------------ -->
            <div ng-if="datos.vista == 5" class="row margin">
                <div class="col l12 m12 s12">
                    <div class="row margin" style="max-height: 80vh;overflow: auto;">
                        <div class="col l12 m12 s12 no-padding">
                            <div class="col s4 no-padding label-new m-b h-auto">
                                <label>Objetivo del programa:</label>
                                <p class="margin m-l" style="min-height: 6rem">{{auditoria.objetivo}}</p>
                            </div>
                            <div class="col s4 no-padding label-new m-b h-auto">
                                <label>Riesgos:</label>
                                <p class="margin m-l" style="min-height: 6rem">{{auditoria.riesgos}}</p>
                            </div>
                            <div class="col s4 no-padding label-new m-b h-auto">
                                <label>Oportunidades:</label>
                                <p class="margin m-l" style="min-height: 6rem">{{auditoria.oportunidades}}</p>
                            </div>
                        </div>
                        <div class="col m12 l4 no-padding">
                            <div class="col s12 no-padding label-new m-b h-auto">
                                <label>Alcance:</label>
                                <p class="margin m-l" style="min-height: 6rem">{{auditoria.alcance}}</p>
                            </div>
                            <div class="col s12 no-padding label-new m-b h-auto">
                                <label>Recursos:</label>
                                <p class="margin m-l" style="min-height: 6rem">{{auditoria.recursos}}</p>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between">
                        <input class="waves-effect waves-light btn white-text red left-align" type="button"
                            ng-click="modalClose()" value="Cerrar">
                        <input ng-click="guardar_auditoria(agenda_fecha)"
                            class="btn white-text default-background right" type="submit" value="Tranferir">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>